<div id="counterangabendiv">


    <div class="untercounterdivs">
        <div class="bilderdivcounter">
            <img class="iconcounterimg" src="{{section.settings.Bild1Icon}}" alt="">
            <p id="counter1" class="counter">100%</p>
        </div>
            <div id="textdivconuter">
            <h3 class="TitelCounterText">{{section.settings.TextZuIcon1}}</h3>
        </div>
    </div>

    <div class="untercounterdivs">
        <div class="bilderdivcounter">
            <img class="iconcounterimg" src="{{section.settings.Bild2Icon}}" alt="">
            <p  id="counter2" class="counter">100%</p>
        </div>
            <div id="textdivconuter">
            <h3 class="TitelCounterText">{{section.settings.TextZuIcon2}}</h3>
        </div>
    </div>


    <div class="untercounterdivs">
        <div class="bilderdivcounter">
            <img class="iconcounterimg" src="{{section.settings.Bild3Icon}}" alt="">
            <p id="counter3" class="counter">100%</p>
        </div>
            <div id="textdivconuter">
            <h3 class="TitelCounterText">{{section.settings.TextZuIcon3}}</h3>
        </div>
    </div>




</div>



{% schema %}
    {
        "name": "counterdivs",
        "settings": [
            {
                "type": "color",
                "label": "Farbe der Icons",
                "id": "IconsColor"
            },


            {
                "type": "text",
                "label": "Bild1Icon Link",
                "id": "Bild1Icon"
            },
            {
                "type": "text",
                "label": "Bild2Icon Link",
                "id": "Bild2Icon"
            },
            {
                "type": "text",
                "label": "Bild3Icon Link",
                "id": "Bild3Icon"
            },


            {
                "type": "text",
                "label": "1 Text zu Icon",
                "id": "TextZuIcon1"
            },
            {
                "type": "text",
                "label": "2 Text zu Icon",
                "id": "TextZuIcon2"
            },
            {
                "type": "text",
                "label": "3 Text zu Icon",
                "id": "TextZuIcon3"
            }
        ],
        "presets": [
            {
                "name": "connterangabendiv"
            }
        ]
    }
    {% endschema %}
    

    <style>

        :root{
            --iconscolor: {{section.settings.IconsColor}};
        }


    #counterangabendiv{
        max-width: 1400px;
        margin-left: auto;
        margin-right: auto;
        
        padding: 10rem 0rem;
        padding-bottom: 12rem;


        display: flex;
        align-items: center;
        justify-content: center;

        overflow: hidden;
        gap: 8rem;
    }
    .untercounterdivs{
        display: flex;
        align-items: center;
        justify-content: center;

        flex-direction: column;

        gap: 0rem;

        width: 33.3%;
    }

    .bilderdivcounter{
        display: flex;
        align-items: center;
        justify-content: center;
        flex-direction: column;

        gap: 0rem;

        width: 100%
    }


    .iconcounterimg{
        width: 9rem;
        height: auto;
    }
    .counter{
        font-size: 6.5rem;
        font-weight: 450;
        color: var(--iconscolor);
        margin: 0;
    }

    .TitelCounterText{
        font-size: 2.8rem;
        font-weight: 1000;
        margin: 0;
        color: black;
    }


    /*Laptop Ansicht*/
    @media (max-width: 1600px) {

    #counterangabendiv{
        max-width: 1400px;
        margin-left: auto;
        margin-right: auto;
        
        padding: 6rem 0rem;
        padding-bottom: 9rem;


        display: flex;
        align-items: center;
        justify-content: center;

        overflow: hidden;
        gap: 2rem;
    }
    .untercounterdivs{
        display: flex;
        align-items: center;
        justify-content: center;

        flex-direction: column;

        gap: 0rem;

        width: 33.3%;
    }

    .bilderdivcounter{
        display: flex;
        align-items: center;
        justify-content: center;
        flex-direction: column;

        gap: 0rem;

        width: 100%
    }


    .iconcounterimg{
        width: 7rem;
        height: auto;
    }
    .counter{
        font-size: 4.5rem;
        font-weight: 450;
        color: var(--iconscolor);
        margin: 0;
    }

    .TitelCounterText{
        font-size: 2.4rem;
        font-weight: 1000;
        margin: 0;
        color: black;
    }

    
    }


    /* I Pad Ansicht*/
    @media(min-width: 500px) and (max-width: 950px){
        #counterangabendiv{
        max-width: 1400px;
        width: 90.5%;
        margin-left: auto;
        margin-right: auto;
        
        padding: 6rem 0rem;
        padding-bottom: 9rem;


        display: flex;
        align-items: center;
        justify-content: center;

        overflow: hidden;
        gap: 1rem;
    }
    .untercounterdivs{
        display: flex;
        align-items: center;
        justify-content: center;

        flex-direction: column;

        gap: 0rem;

        width: 33.3%;
    }

    .bilderdivcounter{
        display: flex;
        align-items: center;
        justify-content: center;
        flex-direction: column;

        gap: 0rem;

        width: 100%
    }


    .iconcounterimg{
        width: 6rem;
        height: auto;
    }
    .counter{
        font-size: 3.5rem;
        font-weight: 450;
        color: var(--iconscolor);
        margin: 0;
    }

    .TitelCounterText{
        font-size: 2rem;
        font-weight: 1000;
        margin: 0;
        color: black;
    }
    }





    /*Phone View */
    @media(max-width:500px){
        #counterangabendiv{
        max-width: 1400px;
        width: 100%;
        margin-left: auto;
        margin-right: auto;
        
        padding: 4.5rem 0rem;
        padding-bottom: 9rem;


        display: flex;
        align-items: center;
        justify-content: center;
        flex-direction: column;

        overflow: hidden;
        gap: 5rem;
    }
    .untercounterdivs{
        display: flex;
        align-items: center;
        justify-content: center;

        flex-direction: column;

        gap: 0rem;

        width: 100%;
    }

    .bilderdivcounter{
        display: flex;
        align-items: center;
        justify-content: center;
        flex-direction: column;

        gap: 1rem;
        padding-bottom: 1rem;

        width: 100%
    }


    .iconcounterimg{
        width: 6.5rem;
        height: auto;
    }
    .counter{
        font-size: 3.8rem;
        font-weight: 450;
        color: var(--iconscolor);
        margin: 0;
    }

    .TitelCounterText{
        font-size: 2.35rem;
        font-weight: 1000;
        margin: 0;
        color: black;
    }
    }
    </style>


    <script>
        const counters = document.querySelectorAll(".counter"); // Alle Element mit den Prozent Zahlen drin.

        function startCounter() {
            let progress = 0;

            const counterintervall = setInterval(() => {
                progress++;
                     counters.forEach((counter) => {
                     counter.innerText = `${progress} %`;
                });

                if(progress === 100){
                     clearInterval(counterintervall);
                }

        }, 35);

        }
     



        // Intersection Observer erstellen
        const observercounterangabendiv = new IntersectionObserver((entries) => {
             entries.forEach(entry => {
                if (entry.isIntersecting) {
                // Wenn das Element sichtbar ist, starte den Counter
                startCounter();
                // Observer nicht mehr benötigt, daher disconnect
                observercounterangabendiv.disconnect();
                }
            });
            }, {
                threshold: 0.3 // Wenn 30% des Elements sichtbar sind
            });

            // Ziel-Div für den Observer
            const targetDiv = document.getElementById('counterangabendiv');

            // Observer beobachtet das Ziel-Div
            observercounterangabendiv.observe(targetDiv);




    </script>